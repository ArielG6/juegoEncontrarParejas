<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>¡Mirá la siguiente imagen!</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  </head>
  <body>
    <main>
      
      <div class="d-grid gap-2 d-md-flex justify-content-md-center">
        <button id="facil" class="btn btn-primary me-md-2" type="button">Fácil</button>
        <button id="normal" class="btn btn-primary" type="button">Normal</button>
        <button id="dificil" class="btn btn-primary" type="button">Difícil</button>
      </div>
      <div class="container text-center" id="tableroFacil" style="display: none;">
        <div class="row">
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="f0" class="pos border rounded-4" width="100">
            </div>
          </div>
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="f1" class="pos border rounded-4" width="100">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="f2" class="pos border rounded-4" width="100">
            </div>
          </div>
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="f3" class="pos border rounded-4" width="100">
            </div>
          </div>
        </div>
      </div>
      <div class="container text-center" id="tableroNormal" style="display: none;">
        <div class="row">
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="n0" class="pos border rounded-4" width="100">
            </div>
          </div>
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="n1" class="pos border rounded-4" width="100">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="n2" class="pos border rounded-4" width="100">
            </div>
          </div>
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="n3" class="pos border rounded-4" width="100">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="n4" class="pos border rounded-4" width="100">
            </div>
          </div>
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="n5" class="pos border rounded-4" width="100">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="n6" class="pos border rounded-4" width="100">
            </div>
          </div>
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="n7" class="pos border rounded-4" width="100">
            </div>
          </div>
        </div>
      </div>
      <div class="container text-center" id="tableroDificil" style="display: none;">
        <div class="row">
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="d0" class="pos border rounded-4" width="100">
            </div>
          </div>
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="d1" class="pos border rounded-4" width="100">
            </div>
          </div>
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="d2" class="pos border rounded-4" width="100">
            </div>
          </div>
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="d3" class="pos border rounded-4" width="100">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="d4" class="pos border rounded-4" width="100">
            </div>
          </div>
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="d5" class="pos border rounded-4" width="100">
            </div>
          </div>
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="d6" class="pos border rounded-4" width="100">
            </div>
          </div>
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="d7" class="pos border rounded-4" width="100">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="d8" class="pos border rounded-4" width="100">
            </div>
          </div>
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="d9" class="pos border rounded-4" width="100">
            </div>
          </div>
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="d10" class="pos border rounded-4" width="100">
            </div>
          </div>
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="d11" class="pos border rounded-4" width="100">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="d12" class="pos border rounded-4" width="100">
            </div>
          </div>
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="d13" class="pos border rounded-4" width="100">
            </div>
          </div>
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="d14" class="pos border rounded-4" width="100">
            </div>
          </div>
          <div class="col">
            <div>
              <img src="Parejas/Oculto.jpg" alt="?" id="d15" class="pos border rounded-4" width="100">
            </div>
          </div>
        </div>
      </div>
      <div><p id="final">Selecciona parejas</p></div>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
      <script>      
        //Delay para poder ver las parejas cuando no coinciden
        function sleep(ms) {
          return new Promise(resolve => setTimeout(resolve, ms));
        }
        //Variables globales
        const imagenes =[
          "Parejas/AnimalesSueltos.jpg",
          "Parejas/AnimalesSueltosTexto.jpg",
          "Parejas/CalzadaResbaladiza.jpg",
          "Parejas/CalzadaResbaladizaTexto.jpg",
          "Parejas/CedaElPaso.jpg",
          "Parejas/CedaElPasoTexto.jpg",
          "Parejas/CruceDePeatones.jpg",
          "Parejas/CruceDePeatonesTexto.jpg",
          "Parejas/CruceFerroviario.jpg",
          "Parejas/CruceFerroviarioTexto.jpg",
          "Parejas/DireccionesPermitidas.jpg",
          "Parejas/DireccionesPermitidasTexto.jpg",
          "Parejas/EstacionamientoPermitido.jpg",
          "Parejas/EstacionamientoPermitidoTexto.jpg",
          "Parejas/Estrechamiento.jpg",
          "Parejas/EstrechamientoTexto.jpg",
          "Parejas/LimitacionDeAltura.jpg",
          "Parejas/LimitacionDeAlturaTexto.jpg",
          "Parejas/LimiteDeVelocidadMaxima.jpg",
          "Parejas/LimiteDeVelocidadMaximaTexto.jpg",
          "Parejas/NoEstacionar.jpg",
          "Parejas/NoEstacionarTexto.jpg",
          "Parejas/NoGirarALaDerecha.jpg",
          "Parejas/NoGirarALaDerechaTexto.jpg",
          "Parejas/Pare.jpg",
          "Parejas/PareTexto.jpg",
          "Parejas/Rotonda.jpg",
          "Parejas/RotondaTexto.jpg"
        ];
        const descripcion = [
          "AnimalesSueltos",
          "AnimalesSueltos",
          "CalzadaResbaladiza",
          "CalzadaResbaladiza",
          "CedaElPaso",
          "CedaElPaso",
          "CruceDePeatones",
          "CruceDePeatones",
          "CruceFerroviario",
          "CruceFerroviario",
          "DireccionesPermitidas",
          "DireccionesPermitidas",
          "EstacionamientoPermitido",
          "EstacionamientoPermitido",
          "Estrechamiento",
          "Estrechamiento",
          "LimitacionDeAltura",
          "LimitacionDeAltura",
          "LimiteDeVelocidadMaxima",
          "LimiteDeVelocidadMaxima",
          "NoEstacionar",
          "NoEstacionar",
          "NoGirarALaDerecha",
          "NoGirarALaDerecha",
          "Pare",
          "Pare",
          "Rotonda",
          "Rotonda"
        ];
        let parejas = [];
        let figurai = "";
        let figuraj = "";
        let progreso = [];
        let dificultad = "";
        //Lógica de juego
        $(document).ready(function(){
          //Generación de jugadas
          $("#facil").click(function(){
            dificultad = "f";
            parejas = [];
            while (parejas.length < 4 ){
              let i = Math.floor(Math.random() * 14);
              if (!parejas.includes(i)){
                parejas.push(i);
                if(i%2 == 0){
                  parejas.push(i+1);
                }else{
                  parejas.push(i-1);
                }
              }
            } 
            for (let i = parejas.length -1; i > 0; i--) {
              let j = Math.floor(Math.random() * (i+1));
              let k = parejas[i];
              parejas[i] = parejas[j];
              parejas[j] = k;
              figurai = "#" + dificultad + i;
              $(figurai).attr("alt","?");
              $(figurai).attr("src","Parejas/Oculto.jpg");
            }
            $("#f0").attr("alt","?");
            $("#f0").attr("src","Parejas/Oculto.jpg");   
            $("#final").text("Selecciona parejas");   
            $("#tableroFacil").show();
            $("#tableroNormal").hide();
            $("#tableroDificil").hide();
            progreso = [];
          });
          $("#normal").click(function(){
            dificultad = "n";
            parejas = [];
            while (parejas.length < 8 ){
              let i = Math.floor(Math.random() * 14);
              if (!parejas.includes(i)){
                parejas.push(i);
                if(i%2 == 0){
                  parejas.push(i+1);
                }else{
                  parejas.push(i-1);
                }
              }
            }
            for (let i = parejas.length -1; i > 0; i--) {
              let j = Math.floor(Math.random() * (i+1));
              let k = parejas[i];
              parejas[i] = parejas[j];
              parejas[j] = k;
              figurai = "#" + dificultad + i;
              $(figurai).attr("alt","?");
              $(figurai).attr("src","Parejas/Oculto.jpg");
            }  
            $("#n0").attr("alt","?");
            $("#n0").attr("src","Parejas/Oculto.jpg");   
            $("#final").text("Selecciona parejas");   
            $("#tableroFacil").hide();
            $("#tableroNormal").show();
            $("#tableroDificil").hide();
            progreso = [];
          });
          $("#dificil").click(function(){
            dificultad = "d";
            parejas = [];
            while (parejas.length < 16 ){
              let i = Math.floor(Math.random() * 14);
              if (!parejas.includes(i)){
                parejas.push(i);
                if(i%2 == 0){
                  parejas.push(i+1);
                }else{
                  parejas.push(i-1);
                }
              }
            }  
            for (let i = parejas.length -1; i > 0; i--) {
              let j = Math.floor(Math.random() * (i+1));
              let k = parejas[i];
              parejas[i] = parejas[j];
              parejas[j] = k;
              figurai = "#" + dificultad + i;
              $(figurai).attr("alt","?");
              $(figurai).attr("src","Parejas/Oculto.jpg");
            }
            $("#d0").attr("alt","?");
            $("#d0").attr("src","Parejas/Oculto.jpg");   
            $("#final").text("Selecciona parejas");   
            $("#tableroFacil").hide();
            $("#tableroNormal").hide();
            $("#tableroDificil").show();
            progreso = [];
          });
          $(".pos").click(function(){
            let posicion = this.id;
            $(this).attr("src",imagenes[parejas[posicion.slice(1,posicion.length)]]);
            $(this).attr("alt",descripcion[parejas[posicion.slice(1,posicion.length)]]);
            setTimeout(
            () =>{
              for (let i=0; i < parejas.length-1; i++){
              figurai = "#" + dificultad + i;
              if($(figurai).attr("alt") != "?" && !progreso.includes(figurai)){
                for (let j=i+1; j < parejas.length; j++){
                  figuraj = "#" + dificultad + j;
                  if($(figuraj).attr("alt") != "?" && !progreso.includes(figuraj)){
                    if ($(figurai).attr("alt") == $(figuraj).attr("alt")){
                    progreso.push(figurai);
                    progreso.push(figuraj);
                    if (progreso.length == parejas.length){
                      $("#final").text("Ganaste!");
                    }
                  } else {
                    $(figurai).attr("alt","?");
                    $(figurai).attr("src","Parejas/Oculto.jpg");
                    $(figuraj).attr("alt","?");
                    $(figuraj).attr("src","Parejas/Oculto.jpg");
                  }
                  }
                }
              }   
            }    
            }
            ,500);
          });
        });
      </script>
    </main>    
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script> 
  </body>
</html>
<!-- 
<div>
        <img src="Parejas/Oculto.jpg" id="00" class="pos border rounded-4" width="100">
      </div>
$(document).ready(function(){
        $(".pos").click(function(){
          $(this).text(parejas[this.id]);
          finJuego[this.id]= 1;
          fin = finJuego[0]+finJuego[1]+finJuego[2]+finJuego[3];
        });

    finJuego[this.id]= true;
            for (let x in finJuego){
                if (x == true){
                    fin = true;
                }
            }
        
$(document).ready(function(){
                $("#fin").text("Ganaste!");
            });
        document.getElementById("final").innerHTML ="Ganaste";
        
        
        parejas[0] = 20;
        parejas[1] = 2;
        parejas[2] = 14;
        parejas[3] = 1;
        parejas[4] = 1;
        parejas[5] = 20;
        parejas[6] = 14;
        parejas[7] = 2;

        const codigo = '<div class="row">'+
          '<div class="col">'+
                '<div>'+
                    '<p id="0" class="pos">X</p>'+
                '</div>'+
          '</div>'+
          '<div class="col">'+
                '<div>'+
                    '<p id="1" class="pos">X</p>'+
                '</div>'+
          '</div>'+
        '</div>'+

        <div class="row">'+
            <div class="col">'+
                <div>'+
                    <p id="2" class="pos">X</p>'+
                </div>'+
            </div>
            <div class="col">
                <div>
                    <p id="3" class="pos">X</p>
                </div>
            </div>
        </div>

        <div class="row">
          <div class="col">
              <div>
                  <p id="4" class="pos">X</p>
              </div>
          </div>
          <div class="col">
              <div>
                  <p id="5" class="pos">X</p>
              </div>
          </div>
        </div>

        <div class="row">
          <div class="col">
              <div>
                  <p id="6" class="pos">X</p>
              </div>
          </div>
          <div class="col">
              <div>
                  <p id="7" class="pos">X</p>
              </div>
          </div>
        </div>';

//Armado del tablero
            let codigo = "";
            let k = 0;
        /*for (let i=1; i<=1; i++){
              codigo = codigo + '<div class="row">';
              for (let j=1; i<=1; j++){
                codigo = codigo + 
                  '<div class="col">'+
                    '<div>'+
                      '<p id="'+ k + '" class="pos">X</p>'+
                    '</div>'+
                  '</div>';
                k++;
              }
              codigo = codigo + '</div>';
            } */
-->